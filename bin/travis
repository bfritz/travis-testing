#!/bin/bash -x

set -e

echo "/etc/sbt/jvmopts:"
cat /etc/sbt/jvmopts

echo
echo "/etc/sbt/sbtopts:"
cat /etc/sbt/sbtopts

SBT_CMD=$(which sbt)
echo "sbt is:"
echo $SBT_CMD
ls -al $SBT_CMD

echo "sbt sha1:"
sha1sum $SBT_CMD

# avoid Travis sbt and use `before_script` version
if [[ -x $HOME/sbt/bin/sbt ]] && [[ $(which sbt) == "/usr/local/bin/sbt" ]]; then
    export PATH=$HOME/sbt/bin:$PATH
    echo "sbt command is now $(which sbt)"
fi

unset JVM_OPTS  # ignore /etc/sbt/jvmopts
sbt -J-Xms1000M -J-Xmx1234M -J-XX:MaxMetaspaceSize=234M -Xss6M about
